<form name="form" novalidate>
    <dev-tag-content>
        <dev-tag-content-heading>
            <h5 class="panel-title">
                {{'Create invoice'|translate}}
            </h5>
        </dev-tag-content-heading>
        <dev-tag-content-body>
            <div class="row">
                <div class="row">
                    <div class="col-md-2"></div>
                    <dev-tag-validation-summary errors="model.errors" class="col-md-8"></dev-tag-validation-summary>
                    <div class="col-md-2"></div>
                </div>

                <div class="col-sm-4">
                    <div ng-if="!model.isPayment" class="form-group">
                        <label for="detailAccountId" class="title1">مشتری</label>
                        <div class="input-group" style="width: 100%">
                            <dev-tag-combo-box id="detailAccountId" style="width: 100%" ng-disabled="model.isPayment"
                                               name="detailAccountId"
                                               k-placeholder="{{'Select ...'|translate}}"
                                               k-data-value-field="id"
                                               k-data-text-field="title"
                                               k-data-source="model.detailAccount"
                                               k-suggest="true"
                                               k-minLength="0"
                                               k-filter="'contains'"
                                               k-on-created="model.createNewCustomer($search)"
                                               show-no-data-template
                                               ng-model="model.invoice.detailAccountId"
                                               url="{{model.urls.getAllPeople}}"
                                               required></dev-tag-combo-box>

                            <div ng-messages="form.detailAccountId.$error" ng-if="form.detailAccountId.$dirty">
                                <label ng-message="required" class="error">{{'This field is required'|translate}}</label>
                            </div>
                        </div>
                    </div>

                    <div ng-if="model.isPayment" class="form-group">
                        <label for="detailAccountId" class="title1">مشتری</label>
                        <div class="input-group" style="width: 100%">
                            <span style="width: 100%">{{model.invoice.detailAccountDisplay}}</span>
                        </div>
                    </div>
                </div>

                <div class="col-sm-2">
                    <div ng-if="!model.isPayment" class="form-group">
                        <label for="invoiceDate">تاریخ فاکتور</label>
                        <dev-tag-datepicker id="invoiceDate" ng-disabled="model.isPayment"
                                            ng-model="model.invoice.date"
                                            name="invoiceDate"
                                            required></dev-tag-datepicker>

                        <div ng-messages="form.invoiceDate.$error" ng-if="form.invoiceDate.$dirty">
                            <label ng-message="required" class="error">{{'This field is required'|translate}}</label>
                        </div>
                    </div>

                    <div ng-if="model.isPayment" class="form-group">
                        <label for="invoiceDate">تاریخ فاکتور</label>
                        <span>{{model.invoice.date}}</span>
                    </div>
                </div>

                <div class="col-sm-2">
                    <div ng-if="!model.isPayment" class="form-group">
                        <label for="invoiceNumber" class="title1">شماره فاکتور</label>
                        <dev-tag-numeric id="invoiceNumber" ng-disabled="model.isPayment"
                                         ng-model="model.invoice.number"
                                         style="width: 100%"
                                         name="invoiceNumber"
                                         required></dev-tag-numeric>

                        <div ng-messages="form.invoiceNumber.$error" ng-if="form.invoiceNumber.$dirty">
                            <label ng-message="required" class="error">
                                {{'This field is required'|translate}}</label>
                        </div>
                    </div>

                    <div ng-if="model.isPayment" class="form-group">
                        <label for="invoiceNumber" class="title1">شماره فاکتور</label>
                        <span  style="width: 100%">{{model.invoice.number}}</span>
                    </div>
                </div>

                <div class="row">
                    <div ng-if="!model.isPayment" class="col-sm-12">
                        <div  class="form-group">
                            <label class="label-control" for="description">{{'Description' | translate}}</label>
                            <textarea class="form-control" rows="4" id="description" ng-model="model.invoice.description"></textarea>
                        </div>
                    </div>

                    <div ng-if="model.isPayment" class="col-sm-12">
                        <div  class="form-group">
                            <label class="label-control" for="description">{{'Description' | translate}}</label>
                            <span class="form-control">{{model.invoice.description}}</span>
                        </div>
                    </div>
                </div>

                <dev-tag-content-body is-loading="model.isInvoiceSaleLoading">
                    <div style="padding: 10px"
                         ng-include="'partials/sales/invoiceLines-template.html'"></div>
                </dev-tag-content-body>
            </div>
        </dev-tag-content-body>
        <dev-tag-content-footer>

            <div class="row">
                <div class="col-sm-4 text-right">
                    <div class="btn-group">
                        <dev-tag-button style-type="info" style="width: 100px;"
                                        title="{{'New' | translate}}"
                                        ng-click="model.newInvoice(form)"></dev-tag-button>

                        <dev-tag-button style-type="primary" style="width: 100px;"
                                        ng-click="model.print()"
                                        ng-if="model.isSaving" title="{{'Print ' | translate}}">

                            <span class="fa fa-print"></span></dev-tag-button>

                        <dev-tag-button style-type="success"
                                        ng-if="!model.isPayment"
                                        title="{{'Confirm' | translate}}"
                                        ng-click="model.saveInvoice(form)" style="width: 100px;"></dev-tag-button>

                        <dev-tag-button style-type="success"
                                        ng-if="!model.isPayment"
                                        title="{{'Save as draft' | translate}}"
                                        ng-click="model.saveInvoice(form, 'draft')" style="width: 100px;"></dev-tag-button>

                        <dev-tag-button style-type="primary" style="width: 100px;"
                                        ng-click="model.cashPaymentShow()"
                                        ng-if="model.isPayment" title="{{'Payment ' | translate}}">

                            <span class="fa  fa-money"></span></dev-tag-button>


                    </div>&nbsp;
                </div>
                <div class="col-sm-4"></div>
                <div class="col-sm-4 text-left">
                    <!--<dev-tag-button-->
                    <!--ng-click="model.cashPaymentShow()"-->
                    <!--title="{{'Add cash'| translate}}"-->
                    <!--style-type="info"></dev-tag-button>-->
                    <!--<dev-tag-button-->
                    <!--ng-click="model.attachImage()"-->
                    <!--title="{{'Add Bank Receipt'| translate}}"-->
                    <!--style-type="primary"></dev-tag-button>-->
                    <!--<dev-tag-button-->
                    <!--ng-click="model.attachImage()"-->
                    <!--title="{{'Add Cheque'| translate}}"-->
                    <!--style-type="warning"></dev-tag-button>-->
                </div>
            </div>

        </dev-tag-content-footer>
    </dev-tag-content>
</form>







