<dev-tag-guide>
    <i class="fa fa-info-circle fa-2x" aria-hidden="true"></i>
   <ul>
       <li>
           گزارش صورت معاملات زیر، براساس ثبت تایید شده ی تمامی فاکتورها ی خرید و فروش می باشد.
       </li>
       <li>
           جهت اعمال فیلترها از دکمه ی
           <b>
               فیلتر
           </b>
           استفاده نمایید.
       </li>
       <li>
           کادرهای جمع کل
           <b>فروش</b>
           و
           <b>خرید</b>
           در زیر لیست، براساس عملکرد خرید و فروش در بازه ی مورد نظر شما در فیلتر می باشد.
       </li>
   </ul>
</dev-tag-guide>
<dev-tag-content dev-attr-title={{'SeasonalReport'|translate}}>
    <dev-tag-content-body>
        <div class="row">
            <div class="col-md-1">
                <div class="btn-group-vertical" role="group">
                    <button type="button"
                            ng-click="model.selectInvoiceType(item)"
                            ng-repeat="item in model.invoiceTypes"
                            ng-class="{
                            'btn-primary': model.filter.invoiceType === item.key,
                            'btn-white': model.filter.invoiceType !== item.key}"
                            class="btn"
                            style="margin-left: 5px">{{item.display}}
                    </button>
                </div>
            </div>
            <div class="col-md-1" style="margin-right: 5px"></div>
            <div class="col-md-3">
                <select ng-model="model.filter.haveNationalCode"
                        ng-options="p.key as p.display for p in model.detailAccountStatuses"
                        class="form-control">
                </select>
                <select ng-model="model.filter.haveVat"
                        ng-options="p.key as p.display for p in model.vatStatuses"
                        class="form-control"
                        style="margin-top: 3px">
                </select>
            </div>
            <div class="col-md-1" style="width: 3%"></div>
            <div class="col-md-4">
                <div class="row" style="margin-bottom: 3px; margin-top: 5px">
                    <div class="col-md-1"></div>
                    <div class="col-md-10">
                    <span ng-repeat="item in model.filterType">
                       <dev-tag-radio
                               style="margin-right: 15px; margin-left: 15px"
                               ng-class="{'checked': item.key == model.selectedFilterType}"
                               k-value="{{item.key}}"
                               ng-model="model.selectedFilterType"></dev-tag-radio>
                               {{item.display}}
                    </span>
                    </div>
                    <div class="col-md-1"></div>
                </div>
                <div class="row" style="margin-top: 10px">
                    <select ng-model="model.filter.month"
                            ng-if="model.selectedFilterType === 'month'"
                            ng-options="p.key as p.display for p in model.months"
                            class="form-control">
                    </select>

                    <select ng-model="model.filter.season"
                            ng-if="model.selectedFilterType === 'season'"
                            ng-options="p.key as p.display for p in model.seasons"
                            class="form-control">
                    </select>

                    <div class="row"
                         ng-if="model.selectedFilterType === 'date'">
                        <div class="col-md-2" style="text-align: left;margin-top: 7px">
                            <label class="label-control">{{'From date' | translate}}</label>
                        </div>
                        <div class="col-md-4">
                            <dev-tag-datepicker
                                    ng-model="model.filter.minDate"
                                    name="temporaryDate"></dev-tag-datepicker>
                        </div>
                        <div class="col-md-2" style="text-align: left;margin-top: 7px">
                            <label class="label-control">{{'To date' | translate}}</label>
                        </div>
                        <div class="col-md-4">
                            <dev-tag-datepicker
                                    ng-model="model.filter.maxDate"
                                    name="temporaryDate"></dev-tag-datepicker>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-2"></div>
        </div>
        <div class="row" style="margin-top: 5px">
            <div class="col-md-9"></div>
            <div class="col-md-3">
                <dev-tag-button
                        ng-click="model.onChangedFilter()"
                        icon="fa fa-refresh fa-lg"
                        style-type="primary"
                        title=&nbsp&nbsp&nbsp{{'Filter'|translate}}></dev-tag-button>
                <dev-tag-button
                        ng-click="model.runExportToExcel()"
                        icon="fa fa-file-excel-o fa-lg"
                        style-type="outline btn btn-primary"
                        title=&nbsp&nbsp&nbsp{{'ExportExcel'|translate}}&nbsp&nbsp&nbsp></dev-tag-button>
            </div>
        </div>
    </dev-tag-content-body>

    <dev-tag-content-body>
        <div class="row">
            <dev-tag-grid option="model.gridOptions" on-load="model.onLoadData($data)"></dev-tag-grid>
        </div>

        <div class="row">
            <div class="col-md-3"></div>
            <div class="col-md-4">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <div class="row">
                            <div class="col-xs-5 title1 so-align-right"><h3>{{'Sale'|translate}}</h3></div>
                        </div>
                    </div>
                    <div class="panel-body">
                        <div class="row text-left" style="border-bottom: 1px solid #DDDDDD;">
                            <div class="col-xs-5 title1 so-align-right"><h4>{{'Total amount'|translate}}</h4></div>
                            <div class="col-xs-7 title1">
                                <h3>{{model.total.sale.sumPrice || 0 | number}}</h3>
                            </div>
                        </div>
                        <div class="row text-left" style="border-bottom: 1px solid #DDDDDD;">
                            <div class="col-xs-5 title1 so-align-right"><h4>{{'Sum discount'|translate}}</h4></div>
                            <div class="col-xs-7 title1">
                                <h4>{{model.total.sale.sumDiscount || 0 | number}}</h4>
                            </div>
                        </div>
                        <div class="row text-left" style="border-bottom: 1px solid #DDDDDD;">
                            <div class="col-xs-5 title1 so-align-right"><h4>{{'Total vat and tax'|translate}}</h4></div>
                            <div class="col-xs-7 title1">
                                <h4>{{model.total.sale.sumVat || 0 | number}}</h4>
                            </div>
                        </div>
                        <div class="row text-left" style="margin-top: 5px">
                            <div class="col-xs-5 title1 so-align-right"><h4>{{'Total return'|translate}}</h4></div>
                            <div class="col-xs-7 title1">
                                <h4>{{model.total.returnSale.totalPrice || 0 | number}}</h4>
                            </div>
                        </div>
                    </div>
                    <div class="panel-footer">
                        <div class="row text-left">
                            <div class="col-xs-5 h5 txt-bold so-align-right"><h4>{{"Total Sales Price"|translate}}</h4>
                            </div>
                            <div class="col-xs-7 h5 txt-bold "
                                 ng-model="model.invoice.totalPrice">
                                <h4>{{model.total.sale.totalPrice || 0 |number}}</h4>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-1"></div>
            <div class="col-md-4">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <div class="row">
                            <div class="col-xs-5 title1 so-align-right"><h3>{{'Purchase'|translate}}</h3></div>
                        </div>
                    </div>
                    <div class="panel-body">
                        <div class="row text-left" style="border-bottom: 1px solid #DDDDDD;">
                            <div class="col-xs-5 title1 so-align-right"><h4>{{'Total amount'|translate}}</h4></div>
                            <div class="col-xs-7 title1">
                                <h3>{{model.total.purchase.sumPrice || 0 | number}}</h3>
                            </div>
                        </div>
                        <div class="row text-left" style="border-bottom: 1px solid #DDDDDD;">
                            <div class="col-xs-5 title1 so-align-right"><h4>{{'Sum discount'|translate}}</h4></div>
                            <div class="col-xs-7 title1">
                                <h4>{{model.total.purchase.sumDiscount || 0 | number}}</h4>
                            </div>
                        </div>

                        <div class="row text-left" style="border-bottom: 1px solid #DDDDDD;">
                            <div class="col-xs-5 title1 so-align-right"><h4>{{'Total vat and tax'|translate}}</h4></div>
                            <div class="col-xs-7 title1">
                                <h4>{{model.total.purchase.sumVat || 0 | number}}</h4>
                            </div>
                        </div>

                        <div class="row text-left" style="margin-top: 5px">
                            <div class="col-xs-5 title1 so-align-right"><h4>{{'Total return'|translate}}</h4></div>
                            <div class="col-xs-7 title1">
                                <h4>{{model.total.returnPurchase.totalPrice || 0 | number}}</h4>
                            </div>
                        </div>
                    </div>
                    <div class="panel-footer">
                        <div class="row text-left">
                            <div class="col-xs-5 h5 txt-bold so-align-right"><h4>{{"Total purchase Price"|translate}}</h4>
                            </div>
                            <div class="col-xs-7 h5 txt-bold "
                                 ng-model="model.invoice.totalPrice">
                                <h4>{{model.total.purchase.totalPrice || 0 |number}}</h4>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </dev-tag-content-body>


</dev-tag-content>