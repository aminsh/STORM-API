<div class="row">
    <dev-tag-guide>
        <ul>
            <li>
              جهت محاسبه ی سود و زیان صاحبان سهام نام آنها در این بخش افزوده شود.
            </li>
        </ul>
    </dev-tag-guide>
    <dev-tag-button
            ng-click="model.save(form)"
            icon="glyphicon glyphicon-floppy-disk"
            ng-disabled="model.isSaving"
            is-waiting="model.isSaving"
            style-type="primary"
            title="{{'Save' | translate}}"
            ng-disabled="form.$invalid">
    </dev-tag-button>
    <dev-tag-button style-type="primary btn-outline"
                    title="{{'New row' | translate}}"
                    ng-click="model.addStakeholder()"></dev-tag-button>

    <table class="table table-striped table-hover ">
        <thead>
        <tr>
            <th style="width: 60%">{{'Detail account'|translate}}</th>
            <th style="width: 20%">{{'Percent share'|translate}}</th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="item in model.stakeholders"
            name="form-{{$index}}"
            ng-form>
            <td>
                <dev-tag-combo-box
                        name="detailAccountId"
                        k-placeholder="{{'Select ...'|translate}}"
                        k-data-value-field="id"
                        k-data-text-field="display"
                        url="{{model.urls.getAllDetailAccount}}"
                        k-on-changed="model.onDetailAccountChanged($item, item, form['form-'+$index])"
                        k-on-bound="model.onDetailAccountChanged($item, item, form['form-'+$index])"
                        ng-model="item.detailAccountId"
                        required></dev-tag-combo-box>

                <div ng-messages="form['form-'+$index].detailAccountId.$error"
                     ng-if="form['form-'+$index].detailAccountId.$dirty">
                    <label ng-message="required"
                           class="error">{{'This field is required'|translate}}</label>
                </div>
            </td>
            <td>
                <div class="row">
                    <dev-tag-numeric ng-model="item.rate"></dev-tag-numeric>
                </div>
            </td>
            <td style="vertical-align: middle">
                <button
                        style="margin-left: 5px"
                        type="button"
                        ng-click="model.removeStakeholder(item)"
                        class="close"
                        title="{{'Remove'| translate}}">
                    <span aria-hidden="true">&times;</span>
                </button>
            </td>
        </tr>
        </tbody>
    </table>
</div>