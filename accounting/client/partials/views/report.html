<dev-tag-toolbar>
    <dev-tag-button
            ng-click="toggleReportList()"
            icon="{{canShowReportList ? 'fa fa-close' : ''}}"
            style-type="white"
            title="{{canShowReportList ? 'Close report list' : 'Report list' | translate}}"
    </dev-tag-button>

    <dev-tag-button
            ng-if="isDevelopment && mode == 'design'"
            ng-click="onExitDesign()"
            title="Exit designer"></dev-tag-button>

</dev-tag-toolbar>
<div class="col-md-3"
     ng-show="canShowReportList">
    <uib-accordion close-others="true">
        <div uib-accordion-group class="panel-primary" ng-repeat="r in reports">

            <uib-accordion-heading>
                <h4>{{r.text}}</h4>
            </uib-accordion-heading>

            <ul class="list-group">
                <li class="list-group-item" style="cursor: pointer" ng-click="select(item)"
                    ng-class="{'active': item == selectedReport}" ng-repeat="item in r.items">
                    {{item.text}}

                    <span ng-if="isDevelopment"
                          class="fa fa-edit pull-left"
                          style="cursor: pointer"
                          ng-click="design(item)"></span>
                </li>
            </ul>
        </div>
    </uib-accordion>
</div>

<div class="col-md-{{canShowReportList ? '9' : '12'}}">
    <!--<dev-tag-content dev-attr-title="{{'Reports'|translate}}">

        <div class="row">
            <dev-tag-button
                    ng-if="isDevelopment && mode == 'design'"
                    ng-click="onExitDesign()"
                    title="Exit designer"></dev-tag-button>

            <dev-tag-report-designer
                    ng-if="mode == 'design'"
                    report-data="data"
                    report-file-name="{{fileName}}"
                    report-title="{{reportTitle}}"
                    report-data-source-name="data">
            </dev-tag-report-designer>


        </div>
    </dev-tag-content>-->

    <uib-tabset active="activeTabIndex"
                ng-if="mode == 'view'">

        <uib-tab index="0" heading="{{'Parameters'|translate}}">
        <div class="row" style="margin: 20px 0 20px 0">
            <div class="col-md-8">
                <form name="form">
                    <div class="col-xs-12">
                        <div class="row "
                             style="margin-top: 10px"
                             ng-if="selectedReport && selectedReport.params.includes('number')"
                             ng-include="'partials/templates/report.parameter.number.html'">
                        </div>
                        <div class="row"
                             style="margin-top: 10px"
                             ng-if="selectedReport && selectedReport.params.includes('date')"
                             ng-include="'partials/templates/report.parameter.date.html'">

                        </div>
                        <div class="row"
                             style="margin-top: 10px"
                             ng-if="selectedReport && selectedReport.params.includes('generalLedgerAccount')"
                             ng-include="'partials/templates/report.parameter.generalLedgerAccount.html'">

                        </div>
                        <div class="row"
                             style="margin-top: 10px"
                             ng-if="selectedReport && selectedReport.params.includes('subsidiaryLedgerAccount')"
                             ng-include="'partials/templates/report.parameter.subsidiaryLedgerAccount.html'">

                        </div>
                        <div class="row"
                             style="margin-top: 10px"
                             ng-if="selectedReport && selectedReport.params.includes('detailAccount')"
                             ng-include="'partials/templates/report.parameter.detailAccount.html'">

                        </div>

                        <div ng-repeat="category in dimensionCategories"
                             class="row"
                             style="margin-top: 10px"
                             ng-if="selectedReport && selectedReport.params.includes('dimensions')"
                             ng-include="'partials/templates/report.parameter.dimensions.html'">

                        </div>

                        <div class="row"
                             style="margin-top: 10px"
                             ng-if="selectedReport && selectedReport.params.includes('cheque')"
                             ng-include="'partials/templates/report.parameter.cheque.html'">

                        </div>

                        <div class="row"
                             style="margin-top: 10px"
                             ng-if="selectedReport && selectedReport.params.includes('chequeDate')"
                             ng-include="'partials/templates/report.parameter.chequeDate.html'">

                        </div>

                        <div class="row"
                             style="margin-top: 10px"
                             ng-if="selectedReport && selectedReport.params.includes('noPeriod')">
                            <div class="col-md-2"></div>
                            <div class="col-md-5">
                                <dev-tag-check-box ng-model="journalSearch.isNotPeriodIncluded">
                                    <label style="margin-top: 4px">{{'Is not period included' | translate}}</label>
                                </dev-tag-check-box>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-2"></div>
                            <div class="col-md-10" style="text-align: center">

                                <dev-tag-button
                                        ng-click="addViewerTab()"
                                        icon="fa fa-play-circle-o"
                                        style-type="primary"
                                        title="{{'Show' | translate}}"></dev-tag-button>

                                <dev-tag-button
                                        ng-if="isDevelopment"
                                        ng-click="design({fileName: 'layout',text: 'Layout'})"
                                        icon="fa fa-edit"
                                        style-type="white"
                                        title="{{'Edit layout' | translate}}"></dev-tag-button>
                            </div>
                            <div class="col-md-2"></div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        </uib-tab>

        <uib-tab index="$index + 1" heading="{{tab.title}}" ng-repeat="tab in viewerTabs">
            <uib-tab-heading>
                <div class="row">
                    <button type="button"
                            ng-click="closeViewerTab(tab , $event)"
                            class="close pull-left"
                            aria-label="Close">
                        <span style="margin-right: 5px">&times;</span>
                    </button>
                    <span class="pull-right" style="margin-left: 18px;margin-right: 10px">{{tab.title}}</span>
                </div>
            </uib-tab-heading>

            <dev-tag-report-viewer
                    report-data="data"
                    report-file-name="{{tab.fileName}}"
                    report-title="{{tab.title}}"
                    report-data-source-name="data"></dev-tag-report-viewer>
        </uib-tab>
    </uib-tabset>

    <dev-tag-report-designer
            ng-if="mode == 'design'"
            report-data="data"
            report-file-name="{{fileName}}"
            report-title="{{reportTitle}}"
            report-data-source-name="data">
    </dev-tag-report-designer>
</div>

