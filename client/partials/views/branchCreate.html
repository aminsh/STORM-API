<dev-tag-content title="{{'New branch'|translate}}"
                 width="500px"
                 ng-if="!model.isSaved">
    <form name="form" ng-submit="model.create(form)" novalidate>
        <dev-tag-validation-summary errors="model.errors"></dev-tag-validation-summary>

        <div class="col-md-6">
            <div class="form-group"
                 ng-class="{ 'has-error' : form.name.$invalid && form.name.$dirty }">
                <label class="label-control">{{'Title'|translate}}</label>
                <input
                        type="text"
                        class="form-control input-lg"
                        name="name"
                        required
                        minlength="3"
                        ng-model="model.branch.name"
                />

                <div ng-messages="form.name.$error" ng-if="form.name.$dirty">
                    <label
                            ng-message="required"
                            class="help-block">{{'This field is required'|translate}}
                    </label>
                    <label
                            ng-message="minlength"
                            class="help-block">{{'This field should be at least 3 character'|translate}}
                    </label>
                </div>
            </div>

            <div class="form-group has-feedback"
                 ng-class="{ 'has-error' : form.phone.$invalid && form.phone.$dirty }">
                <label class="label-control">{{'Phone'|translate}}</label>
                <input
                        type="tel"
                        class="form-control input-lg"
                        name="phone"
                        ng-model="model.branch.phone"
                        ng-pattern="/^(\+?(\d{1}|\d{2}|\d{3})[- ]?)?\d{3}[- ]?\d{3}[- ]?\d{4}$/"
                        style="text-align: left"
                />
                <span class="glyphicon glyphicon-earphone form-control-feedback" aria-hidden="true"></span>

                <div ng-messages="form.phone.$error" ng-if="form.phone.$dirty">
                    <label
                            ng-message="pattern"
                            class="help-block">{{'Phone format is not corrent'|translate}}
                    </label>
                </div>
            </div>

            <div class="form-group"
                 ng-class="{ 'has-error' : form.address.$invalid && form.address.$dirty }">
                <label class="label-control">{{'Address'|translate}}</label>
            <textarea
                    class="form-control input-lg"
                    name="address"
                    ng-model="model.branch.address"
            ></textarea>

                <div ng-messages="form.address.$error" ng-if="form.address.$dirty">

                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="form-group">
                <label class="label-control">{{'Logo'|translate}}</label>
                <dev-tag-uploader
                        ng-if="model.uploadingState == 'none'"
                        uploaded="model.uploaded(response)"></dev-tag-uploader>

                <div ng-if="model.uploadingState == 'uploaded'">
                    <img ng-src="{{model.imageFileName}}"
                    style="width: 70px;height: 70px;">
                    <a ng-click="model.uploadAnotherFile()"
                       class="btn btn-primary">{{'Upload another image'|translate}}</a>
                </div>

            </div>
        </div>

        <div style="padding-right: 15%;padding-left: 15%">
            <button type="submit" class="btn btn-success btn-lg btn-block">
                <i class="glyphicon glyphicon-plus"></i>
                {{'Submit'| translate}}
            </button>
        </div>
    </form>
</dev-tag-content>

<dev-tag-content-alert alert-type="success"
                       style="width: 300px"
                       ng-if="model.isSaved">
    <h4>
        {{'Branch'|translate}} {{model.branch.name}}
        {{'Created successfully'|translate}}
    </h4>
</dev-tag-content-alert>

